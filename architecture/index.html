
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A security-oriented tool for detecting microarchitectural leaks in CPUs, such as Spectre and Meltdown.">
      
      
        <meta name="author" content="Microsoft">
      
      
        <link rel="canonical" href="https://github.com/microsoft/sca-fuzzer/architecture/">
      
      
        <link rel="prev" href="../how-revizor-works/">
      
      
        <link rel="next" href="../registers/">
      
      
      <link rel="icon" href="../assets/ms_icon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>Architecture Overview - Revizor</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#revizor-architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Revizor" class="md-header__button md-logo" aria-label="Revizor" data-md-component="logo">
      
  <img src="../assets/ms_icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Revizor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Architecture Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/microsoft/sca-fuzzer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/sca-fuzzer
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../quick-start/" class="md-tabs__link">
        
  
    
  
  Quick Start

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cli/" class="md-tabs__link">
          
  
  User Documentation

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../development/" class="md-tabs__link">
          
  
  Developer Documentation

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Revizor" class="md-nav__button md-logo" aria-label="Revizor" data-md-component="logo">
      
  <img src="../assets/ms_icon.png" alt="logo">

    </a>
    Revizor
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/microsoft/sca-fuzzer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/sca-fuzzer
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick-start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command Line Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration Options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fuzzing-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fuzzing Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../minimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Minimization Passes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Developer Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developer Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-revizor-works/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How Revizor Works
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Architecture Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Architecture Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#test-case-program-generator" class="md-nav__link">
    <span class="md-ellipsis">
      Test Case (Program) Generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-generator" class="md-nav__link">
    <span class="md-ellipsis">
      Input Generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" class="md-nav__link">
    <span class="md-ellipsis">
      Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executor" class="md-nav__link">
    <span class="md-ellipsis">
      Executor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyser" class="md-nav__link">
    <span class="md-ellipsis">
      Analyser
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#revizor-modules-and-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Revizor Modules and Interfaces
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Revizor Modules and Interfaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-specific-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture-specific Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abstract-test-case" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract Test Case
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Abstract Test Case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operandspec" class="md-nav__link">
    <span class="md-ellipsis">
      OperandSpec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instructionspec" class="md-nav__link">
    <span class="md-ellipsis">
      InstructionSpec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operand" class="md-nav__link">
    <span class="md-ellipsis">
      Operand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instruction" class="md-nav__link">
    <span class="md-ellipsis">
      Instruction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basicblock" class="md-nav__link">
    <span class="md-ellipsis">
      BasicBlock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function" class="md-nav__link">
    <span class="md-ellipsis">
      Function
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testcasedag" class="md-nav__link">
    <span class="md-ellipsis">
      TestCaseDAG
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Executor-related Topics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Executor-related Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../registers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Register Allocation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory Layout
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#test-case-program-generator" class="md-nav__link">
    <span class="md-ellipsis">
      Test Case (Program) Generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-generator" class="md-nav__link">
    <span class="md-ellipsis">
      Input Generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" class="md-nav__link">
    <span class="md-ellipsis">
      Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executor" class="md-nav__link">
    <span class="md-ellipsis">
      Executor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyser" class="md-nav__link">
    <span class="md-ellipsis">
      Analyser
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#revizor-modules-and-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Revizor Modules and Interfaces
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Revizor Modules and Interfaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-specific-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture-specific Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abstract-test-case" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract Test Case
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Abstract Test Case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operandspec" class="md-nav__link">
    <span class="md-ellipsis">
      OperandSpec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instructionspec" class="md-nav__link">
    <span class="md-ellipsis">
      InstructionSpec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operand" class="md-nav__link">
    <span class="md-ellipsis">
      Operand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instruction" class="md-nav__link">
    <span class="md-ellipsis">
      Instruction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basicblock" class="md-nav__link">
    <span class="md-ellipsis">
      BasicBlock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function" class="md-nav__link">
    <span class="md-ellipsis">
      Function
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testcasedag" class="md-nav__link">
    <span class="md-ellipsis">
      TestCaseDAG
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="revizor-architecture">Revizor Architecture</h1>
<p>Below is a high-level overview of Revizor's architecture and its key modules.</p>
<p>[THE FOLLOWING IS A WORK IN PROGRESS]</p>
<p><img alt="architecture" src="../assets/arch.png" /></p>
<p>Revizor has <strong>five</strong> chief components:</p>
<ol>
<li>Test Case Generator</li>
<li>Input Generator</li>
<li>Model</li>
<li>Executor</li>
<li>Analyser</li>
</ol>
<p>The <strong>Test Case Generator</strong> and <strong>Input Generator</strong> are responsible for
generating random test cases to be run through the <strong>Model</strong> and <strong>Executor</strong>.
The results are examined by the <strong>Analyser</strong> for contract violations.</p>
<h3 id="test-case-program-generator">Test Case (Program) Generator</h3>
<p>The TCG is responsible for generating random assembly test cases. It takes an
Instruction Set Specification as input in order for it to understand the
instructions and syntax it can use for generation.</p>
<h3 id="input-generator">Input Generator</h3>
<p>The IG is responsible for generating the <em>inputs</em> that are passed into a test
case created by the TCG. Largely, this means <strong>register</strong> and <strong>memory</strong> values
that the microarchitecture will be primed with before executing the test case.
In this way, a single test case program can be run across several different
inputs, allowing for multiple contract traces (and later, hardware traces) to be
collected for analysis.</p>
<h3 id="model">Model</h3>
<p>The Model's job is to accept test cases and inputs from the TCG &amp; IG and
<em>emulate</em> the test case to collect <strong>contract traces</strong>. A single test case seeded
with several inputs (<code>N</code> inputs) will create several contract traces (<code>N</code>
contract traces) as the model's output. These are passed to the Analyser to
determine <strong>input classes</strong>.</p>
<h3 id="executor">Executor</h3>
<p>The Executor, on the other side from the Model, is responsible for running the
<em>same</em> test cases (with the <em>same</em> inputs) on physical hardware to collect
<strong>hardware traces</strong>. Hardware traces from the same input class are collected and
studied by the Analyser to detect <strong>contract violations</strong>.</p>
<h3 id="analyser">Analyser</h3>
<p>The Analyser receives contract traces from the Model and hardware traces from
the Executor to accomplish two primary goals:</p>
<ol>
<li>Compare contract traces to set up <strong>input classes</strong>.</li>
<li>Compare hardware traces to detect <strong>contract violations</strong>.</li>
</ol>
<h2 id="revizor-modules-and-interfaces">Revizor Modules and Interfaces</h2>
<p>Revizor's implementation and <a href="./">architecture</a> is separated into
multiple Python files:</p>
<ul>
<li><code>cli.py</code> - implements the command-line interface of revizor.</li>
<li><code>config.py</code> - implements parsing and managing of revizor's YAML configuration
  file.</li>
<li><code>generator.py</code> - implements the <strong>Test Case Generator</strong> portion of
  <a href="./">revizor's architecture</a>.</li>
<li><code>input_generator.py</code> - implements the <strong>Input Generator</strong> portion of
  <a href="./">revizor's architecture</a>.</li>
<li><code>model.py</code> - implements the Unicorn-based <strong>Model</strong> portion of
  <a href="./">revizor's architecture</a>.</li>
<li><code>executor.py</code> - implements the <strong>Executor</strong> portion of
  <a href="./">revizor's architecture</a>.</li>
<li><code>analyser.py</code> - implements the <strong>Analyser</strong> portion of
  <a href="./">revizor's architecture</a>.</li>
<li><code>postprocessor.py</code> - defines the <code>MinimizerViolation</code> class, used during
  <code>minimize</code> mode to reduce a violation-inducing test case down to a smaller
  size while still maintaining the violation-inducing behavior.</li>
<li><code>fuzzer.py</code> - implements <code>fuzz</code> mode that utilizes all main components to
  perform end-to-end hardware fuzzing.</li>
<li><code>factory.py</code> - used to configure revizor accordingly to the user provided
  YAML configuration. Implements a simplified version of the Factory pattern:
  Defines a series of dictionaries that allows revizor to choose
  between various contract, generation techniques, executors, analysers, etc.
  In future, it be also used to implement  multiple-ISA support.</li>
<li><code>interfaces.py</code> - defines abstract classes (i.e., interfaces) of all main
  components of revizor (e.g., abstract  <code>Executor</code>, <code>Model</code>, <code>TestCase</code>,
   <code>Input</code>, etc)</li>
<li><code>isa\_loader.py</code> - defines the <code>InstructionSet</code> class, used to load an
  ISA's specifications from a JSON file provided via the
  <a href="../cli/">command-line interface</a>.</li>
<li><code>service.py</code> - defines logging, statistical, and other services to all other
  modules within revizor.</li>
</ul>
<h3 id="architecture-specific-implementation">Architecture-specific Implementation</h3>
<p>The modules above are ISA-independent. The architecture-specific implementations
are located in the subdirectories. For example, the implementation of the modules
for the x86-64 architecture is located in <code>src/x86/</code>. It's structure largely
mirrors the main modules of revizor (e.g., <code>x86_model.py</code> contains x86-specific
parts of the <strong>Model</strong> module). The only unique parts are:</p>
<ul>
<li><code>*_target_desc.py</code> - defines constants describing the ISA (e.g., a list of
  available registers) and some helper functions.</li>
<li><code>get_spec.py</code> - a script for transforming the ISA description provided
  by the CPU vendor (different for every vendor) into a unified JSON format</li>
<li><code>executor/</code> - contains a low-level implementation of the executor. The
  implementation will be different for each architecture. For black-box x86 CPUs,
  it is a Linux kernel module.</li>
</ul>
<h3 id="abstract-test-case">Abstract Test Case</h3>
<p>This describes a number of Python classes within revizor that define parts of an
assembly test case. Revizor's TCG uses them to generate syntactically-valid
assembly. The classes are defined in <code>interfaces.py</code>.</p>
<h4 id="operandspec"><code>OperandSpec</code></h4>
<p>The <code>OperandSpec</code> class defines a set of valid operands for any given assembly
instruction. Each <code>InstructionSpec</code> object (described below) contains a list of
these operand specifications. It contains properties such as:</p>
<ul>
<li>The <code>type</code> of operand</li>
<li>The <code>width</code> of the operand</li>
<li>Whether or not the operand is a <code>src</code> or <code>dest</code> operand</li>
</ul>
<h4 id="instructionspec"><code>InstructionSpec</code></h4>
<p>This class represents a single instruction specification. It contains a name
(i.e. the actual instruction mnemonic, such as <code>ADD</code>) and a list of
<code>OperandSpec</code>s, defining valid operands for the instruction. It also has a
number of boolean flags that indicate unique attributes about the instruction,
such as:</p>
<ul>
<li>If the instruction contains a memory write</li>
<li>If the instruction is a control-flow instruction</li>
</ul>
<h4 id="operand"><code>Operand</code></h4>
<p>The <code>Operand</code> class defines an actual operand to be used in an instruction
placed into the TCG's generated test case (not to be confused with
<code>OperandSpec</code>, which is a set of rules used to define possible operand choices
for an instruction). This is an <strong>abstract base class</strong> that provides a number
of sub-classes:</p>
<ul>
<li><code>RegisterOperand</code></li>
<li><code>MemoryOperand</code></li>
<li><code>ImmediateOperand</code></li>
<li><code>LabelOperand</code></li>
<li><code>AgenOperand</code></li>
<li><code>FlagsOperand</code></li>
</ul>
<h4 id="instruction"><code>Instruction</code></h4>
<p>Similar to the relationship between <code>OperandSpec</code> and <code>Operand</code>, the
<code>Instruction</code> class defines an actual instruction, constrained by an
<code>InstructionSpec</code>, that is used during test case generation. It contains a list
of <code>Operand</code>s and is linked to its neighboring instructions via object
references.</p>
<h4 id="basicblock"><code>BasicBlock</code></h4>
<p>Thisi class represents a single basic block within the generated test case (a
<strong>basic block</strong> is a straight-line sequence of assembly instructions that has a
single entry and exit point). It contains a list of all instructions contained
within, references to its successor basic block(s), and a list of "terminator"
instructions (instructions that exit the basic block, such as a branch).</p>
<h4 id="function"><code>Function</code></h4>
<p>This object represents a collection of basic blocks that form a function. It has
an "entry" basic block and an "exit" basic block, along with a list of all basic
blocks that comprise the function.</p>
<h4 id="testcasedag"><code>TestCaseDAG</code></h4>
<p><strong>DAG</strong> is short for <strong>Directed Acyclic Graph</strong>. This object represents the
<em>entire</em> test case's control flow. It contains a list of functions that, within,
define all instructions to be written out to the test case's assembly file.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Microsoft
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "search.share"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>